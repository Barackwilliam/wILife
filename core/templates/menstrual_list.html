{% extends 'base.html' %}
{% block content %}
<div class="container py-4">
  <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4">
    <h2 class="mb-3 mb-md-0 text-purple fw-bold">
      ü©∏ My Menstrual Records
      <a href="{% url 'health_list' %}" class="btn btn-sm btn-outline-danger ms-2" title="Back to List">
        <i class="bi bi-arrow-left"></i>
      </a>
    </h2>
    <a href="{% url 'menstrual_add' %}" class="btn btn-lg text-white" style="background-color: #6a1b9a; border-radius: 8px;">‚ûï Add New</a>
  </div>

  {% if records %}
  <div class="table-responsive">
    <table class="table table-hover align-middle border shadow-sm rounded">
      <thead class="text-white" style="background-color: #6a1b9a;">
        <tr>
          <th>Start</th>
          <th>End</th>
          <th>Flow</th>
          <th>Pain</th>
          <th>Mood</th>
          <th>Cycle Length</th>
          <th class="text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for r in records %}
        <tr style="background-color: #fdf4ff;">
          <td>{{ r.start_date }}</td>
          <td>{{ r.end_date }}</td>
          <td><span class="badge bg-pink text-white px-3 py-1">{{ r.flow_level|title }}</span></td>
          <td>{{ r.pain_level }}/5</td>
          <td>{{ r.mood|default:"-" }}</td>
          <td>{{ r.cycle_length }} days</td>
          <td class="text-center">
            <a href="{% url 'menstrual_update' r.id %}" class="btn btn-sm btn-outline-primary me-1">‚úèÔ∏è Edit</a>
            <a href="{% url 'menstrual_delete' r.id %}" class="btn btn-sm btn-outline-danger"
              onclick="return confirm('Are you sure you want to delete this record?');">üóëÔ∏è Delete</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- üìÖ View Calendar Button -->
  <div class="text-center mt-5">
    <a href="{% url 'menstrual_calendar' %}" class="btn btn-lg btn-purple text-white shadow px-5 py-3" style="font-size: 1.25rem; border-radius: 12px;">
      üìÖ View Menstrual Calendar
    </a>
  </div>

  {% else %}
  <div class="alert alert-info shadow-sm mt-4">No menstrual records found. Start by <a href="{% url 'menstrual_add' %}">adding one</a>.</div>
  {% endif %}
</div>

<style>
  .text-purple {
    color: #6a1b9a;
  }

  .bg-pink {
    background-color: #ec407a;
  }

  .btn-purple {
    background-color: #6a1b9a;
  }

  .btn-purple:hover {
    background-color: #4a148c;
  }

  @media (max-width: 576px) {
    th, td {
      font-size: 0.85rem;
      padding: 6px 8px;
    }

    .btn {
      font-size: 0.9rem;
    }
  }
</style>
{% endblock %}
